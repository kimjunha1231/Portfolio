---
title: "TITO 토론 보조 서비스"
period: "2024.03 ~ 2024.12"
role: "프론트엔드 개발 리드 담당, 기획, 디자인, 서류 작성 참여"
achievements: "2024년 ICT멘토링 프로젝트 한이음 트랙 은상 (정보통신기획평가원장상), Apple Store, One Store 출시"
github: "https://github.com/TEAM-POKIE/Tito-Frontend"
order: 2
featured: true
technologies:
  ["Flutter", "Riverpod", "Go_router", "DIO", "Retrofit", "shared_preferences"]
---

## 주요 개발 내용

### 협업 및 프로젝트 관리

- **Agile 방법론**: linear와 discord, obsidian을 활용하여 Agile방법론 협업

[주 2회 회의](/Tito1.png)

- 매주 2회 대면 회의 실시
- 매주 중간 정검 및 각자 파트 개발 및 공부 내용 공유
- 매주 좋았던 점, 힘들었던 점, 배웠던 점을 공유하는 시간 진행
- discord와 obsidian을 활용해 매일 아침 10시마다 어제까지 한 일, 막히는 부분, 오늘 할 일, 도움이 필요한 부분, 특이사항을 공유

### 기술적 구현

- **API 연동**: DIO, Retrofit, shared_preferences을 이용하여 Rest API 연동
  - 성능, 유지보수, 코드 간결화에 유리하다고 생각해서 DIO, Retrofit, shared_preferences를 활용
- **코드 변동 최소화 API 테스트**: Firebase Realtime Database를 이용하여 실시간 데이터 관리
  - 백엔드 연동 전 자체 서버 구축으로 코드 변동이 최소화, 추후 통신 방법만 변경하여 빠르게 기능 구현 가능
- **구현 페이지**: 소셜 로그인(카카오, 애플, 구글), 실시간 채팅, 게시글, Splash 페이지, 온보딩 페이지, 토론 등 대부분 페이지 제작

### 어려웠던 점

**1. Flutter hook 채택**

- 짧은 개발 학습 기간, 앱 관련 지식 문제로 라이프사이클 오류 발생
- React hook과 비슷한 Flutter hook으로 해결

**2. Flutter 기반으로 실시간 채팅 기능을 개발하면서 WebSocket과 Rest API를 적절히 섞어서 데이터를 처리하는 방식이 어려웠습니다.**

1. **프로필 이미지 처리 문제**
   - 처음 실시간 채팅 구현 시 WebSocket에서 토론 참여자의 프로필 이미지 URL 정보도 같이 받아왔었는데, 이 과정에서 메시지가 수신되어도 프로필 이미지가 늦게 로드되어 UI에 늦게 반영되는 문제가 발생했습니다.
   - 매 채팅마다 같은 사용자 프로필 이미지 정보를 계속 받아오는 과정이 쌓여 성능적으로도 UI적으로도 문제가 생겼습니다.
2. **데이터 동기화 및 UI 일관성 문제**
   - Rest API를 통해 가져온 과거 채팅 기록과 바로 채팅을 실시하면 WebSocket 정보가 섞여 UI가 꼬이는 문제가 발생했습니다.
   - WebSocket의 정보로 토론 상대 찾는 중, 토론 진행중, 토론 투표중의 상태를 모두 관리하다보니 초기 화면 진입 시 WebSocket 정보가 늦게 들어와 UI가 갑자기 변하는 경우가 발생했습니다.

### 초기 접근 방식의 문제점

처음에는 WebSocket만으로 모든 데이터(과거 채팅 기록, 프로필 정보, 토론 상태 등)를 실시간으로 처리하려 했습니다. 하지만 이 방식은 다음과 같은 문제점들이 있었습니다:

- **초기 로딩 시간 증가**: 모든 데이터를 WebSocket으로 순차적으로 받아야 해서 사용자가 오래 기다려야 했습니다.
- **데이터 순서 보장 어려움**: 네트워크 상황에 따라 메시지가 순서대로 도착하지 않아 채팅 순서가 뒤섞이는 문제가 발생했습니다.
- **연결 불안정성**: WebSocket 연결이 끊어지면 모든 데이터를 다시 받아야 하는 비효율성이 있었습니다.

## 해결 방법

이를 해결하기 위해 하이브리드 방식을 채택하여 두 가지 전략을 사용했습니다.

### 1. 프로필 이미지 분리 및 캐싱 전략

프로필 이미지는 1대1 채팅 참여자가 정해져 있기 때문에 실시간 채팅과 분리하여 처리했습니다:

- **사전 로딩**: Rest API를 사용해 페이지 진입 시 사용자 이미지를 미리 불러오도록 했습니다.
- **효율적 캐싱**: CachedNetworkImage 라이브러리를 사용해 이미지를 캐싱해두고 불필요한 재요청을 방지했습니다.
- **즉시 렌더링**: WebSocket에서 사용자 ID만 받아와 미리 캐싱된 이미지를 즉시 UI로 표현했습니다.

### 2. 통합 상태 관리 및 데이터 동기화

데이터 꼬임 문제를 해결하기 위해 체계적인 초기화 과정을 구축했습니다:

- **로딩 화면 활용**: 미리 Rest API를 통해 필요한 초기 데이터를 받아왔습니다.
- **전역 상태 관리**: RiverPod을 사용해 과거 채팅 기록과 WebSocket 채팅 정보를 리스트 형태로 한번에 관리했습니다.
- **단계적 초기화**:
  1. 사용자 프로필 정보 로딩 완료
  2. 과거 채팅 기록 로딩 완료
  3. 토론 상태 정보 로딩 완료
  4. 모든 초기 데이터 준비 완료 후 WebSocket 연결

이를 통해 WebSocket에서 받아오던 토론 진행 정보를 Rest API로 미리 받아와 UI를 미리 구축해서 중간에 바뀌던 문제를 해결했습니다. 안정적으로 모든 초기 데이터를 받아와 화면 구성을 완료한 후 WebSocket을 연결함으로써 데이터 꼬임을 방지했습니다.

## 배포 링크

- **App Store**: [https://apps.apple.com/kr/app/tito/id6737821941](https://apps.apple.com/kr/app/tito/id6737821941)
- **One Store**: [https://m.onestore.co.kr/ko-kr/apps/appsDetail.omp?prodId=0000779043](https://m.onestore.co.kr/ko-kr/apps/appsDetail.omp?prodId=0000779043)
