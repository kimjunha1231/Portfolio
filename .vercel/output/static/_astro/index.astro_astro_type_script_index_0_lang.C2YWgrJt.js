function v(e){return e?e.replace(/^### (.+)$/gm,"<h4>$1</h4>").replace(/^## (.+)$/gm,"<h3>$1</h3>").replace(/^# (.+)$/gm,"<h2>$1</h2>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>(?:\n<li>.*<\/li>)*)/gm,"<ul>$1</ul>").replace(/  - (.+)$/gm,'  <li style="margin-left: 2rem;">$1</li>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" style="width: 100%; max-width: 500px; border-radius: 0.5rem; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); margin: 0.5rem 0;" />').replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^(.+)/,"<p>$1").replace(/(.+)$/,"$1</p>").replace(/<p><\/p>/g,""):""}function y(){if(typeof window<"u"&&window.projectsData){const e={};for(const[i,n]of Object.entries(window.projectsData))e[i]={...n,role:`<ul><li>${n.role.replace(/,\s*/g,"</li><li>")}</li></ul>`,achievements:n.achievements?`<ul><li>${n.achievements}</li></ul>`:"",features:n.features?`<ul><li>${n.features.replace(/,\s*/g,"</li><li>")}</li></ul>`:"",details:v(n.details)};return e}return{}}function b(){const e={threshold:.1,rootMargin:"0px 0px -50px 0px"},i=new IntersectionObserver(l=>{l.forEach(s=>{s.isIntersecting&&s.target.classList.add("visible")})},e);document.querySelectorAll(".fade-in, .slide-in-left, .slide-in-right").forEach(l=>i.observe(l))}function w(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",i=>{i.preventDefault();const n=e.getAttribute("href");if(n){const l=document.querySelector(n);l&&l.scrollIntoView({behavior:"smooth",block:"start"})}})})}function E(){console.log("모달 기능 초기화 시작");const e=document.getElementById("project-modal"),i=document.getElementById("modal-title"),n=document.getElementById("modal-role"),l=document.getElementById("modal-achievements"),s=document.getElementById("modal-details"),r=document.getElementById("modal-github"),a=document.getElementById("modal-demo"),f=document.getElementById("modal-close"),h=document.getElementById("modal-period-text");console.log("모달 요소들:",{modal:!!e,modalTitle:!!i,modalPeriod:!!h,modalRole:!!n,modalAchievements:!!l,modalDetails:!!s,modalGithub:!!r,modalDemo:!!a,modalClose:!!f});function g(t){console.log("모달 열기 시도:",t);const o=y()[t];if(!o){console.error("프로젝트 데이터를 찾을 수 없습니다:",t);return}if(console.log("프로젝트 데이터:",o),i&&h&&n&&l&&s&&r&&a&&e){i.textContent=o.title,h.textContent=`개발 기간: ${o.period}`,o.demo?(a.href=o.demo,a.style.display="inline-flex"):a.style.display="none",o.github?(r.href=o.github,r.style.display="inline-flex"):r.style.display="none",console.log("모달 링크 설정:",{github:o.github,githubElement:r.href});const c=document.getElementById("modal-achievements-header");n&&(n.innerHTML=o.role),l&&(o.features?(l.innerHTML=o.features,c&&(c.textContent="주요 기능")):(l.innerHTML=o.achievements,c&&(c.textContent="성과"))),s&&(s.innerHTML=o.details),document.body.style.overflow="hidden",history.pushState({modalOpen:!0},"",window.location.href),e.classList.add("show"),setTimeout(()=>{const d=e.querySelector(".modal-content");d&&(d.scrollTop=0,d.setAttribute("tabindex","-1"),d.focus(),d.scrollIntoView({behavior:"instant",block:"start"}))},100),console.log("모달 열림 완료")}else console.error("모달 요소가 없습니다")}function m(){console.log("모달 닫기"),e&&(e.classList.remove("show"),document.body.style.overflow="")}const u=document.querySelectorAll(".project-card");console.log("프로젝트 카드 개수:",u.length),u.forEach((t,p)=>{const o=t.getAttribute("data-project-id");console.log(`카드 ${p+1}의 project-id:`,o),t.addEventListener("click",function(c){c.preventDefault(),console.log("카드 클릭됨:",o),o?g(o):console.error("프로젝트 ID가 없습니다:",t)})}),a&&a.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),console.log("Demo 링크 클릭됨:",this.href),this.href&&this.href!=="#"&&this.href!=="javascript:void(0)"&&this.href!==window.location.href+"#"&&this.href.startsWith("http")&&window.open(this.href,"_blank","noopener,noreferrer")}),f&&f.addEventListener("click",m),e&&e.addEventListener("click",function(t){t.target===e&&!t.target.closest(".btn")&&!t.target.closest(".modal-links")&&m()}),r&&r.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),console.log("GitHub 링크 클릭됨:",this.href),this.href&&this.href!=="#"&&this.href!=="javascript:void(0)"&&this.href!==window.location.href+"#"&&this.href.startsWith("http")&&window.open(this.href,"_blank","noopener,noreferrer")}),document.addEventListener("keydown",function(t){t.key==="Escape"&&e&&e.classList.contains("show")&&m()}),window.addEventListener("popstate",function(t){e&&e.classList.contains("show")&&m()}),console.log("모달 기능 초기화 완료")}document.addEventListener("DOMContentLoaded",function(){b(),w(),E()});
